<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Liam's Hangman Game</title>
</head>

<body>
    <div id="wrapper">
        <h1>Welcome to my Fruit-Themed Hangman Game!</h1>
        <p id="word-to-guess-text">Push any key to begin.</p>
        <p id="guessed-letters-text">Letters Guess: </p>
        <p id="message-text">Choose a letter to begin!</p>
        <p id="lives-left"></p>
        <p id="wins-text">Wins: 0</p>
        <p>Losses:<b id="losses-text">0</b></p>
        <button id="reset-button" onclick="resetButton();">Play Again?</button>
    </div>

    <script>
        var guessesRemaining = 10;
        //How many wins the player has
        var wins = 0;

        //How many losses the player has
        var losses = 0;
        var lossesText = document.getElementById("losses-text").innerHTML = losses;

        // Letters chosen should be pushed to this array and emptied when you win or lose
        var lettersGuessed = [];
        var wordToGuess = [];

        //This contains possible words to guess
        var categories = ["apple", "watermelon", "pear", "persimmon", "pineapple", "rambutan", "jackfruit", "durian", "peach", "banana", "apricot", "orange", "tangerine", "coconut", "kumquat", "honeydew", "blueberry", "mango", "soursop", "lemon", "rasberry", "strawberry", "blackberry", "cranberry", "peach", "nectarine", "cherry", "date", "lychee", "grape", "guava", "kiwi", "lime", "passionfruit", "pomegranate"]

        //This variable is random word from the categories array
        var chosenWord = categories[Math.floor(Math.random() * categories.length)];
        console.log(chosenWord + " is the chosen word");

        var messageBoxText = document.getElementById("message-text");

        //This objects contains all the messages that can occur during this game
        var messages = {
            win: "You win this round!",
            lose: "You didn't guess the word! Play Again?",
            correct: "That letter was correct! Pick another one.",
            incorrect: "That was incorrect, try another letter",
            guessed: "You already guessed that letter, try a different letter",
        };

        var wordHolder = document.getElementById("word-to-guess-text").innerHTML;
        var lettersGuessedText = document.getElementById("guessed-letters-text");
        var livesLeftText = document.getElementById("lives-left");
        livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";
        console.log(livesLeftText.innerHTML);


        livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";

        for (var i = 0; i < chosenWord.length; i++) {
            wordToGuess.push("_");
            wordToGuess.join("");
            document.getElementById("word-to-guess-text").innerHTML = wordToGuess.join(" ");
        };

        //This function pushes guessed letters to the lettersGuess array 
        document.onkeyup = function (event) {
            var userGuess = event.key.toLowerCase();
            console.log(userGuess);

            for (let i = 0; i < chosenWord.length; i++) {
                if (chosenWord[i].indexOf(userGuess) === -1) {
                    wordToGuess[i] == userGuess;
                    wordHolder = wordToGuess;
                }
            }

            // if (chosenWord.indexOf(userGuess) === -1) {
            //     wordToGuess.indexOf(chosenWord[userGuess]) == userGuess;
            //     console.log(chosenWord.indexOf(userGuess));
            //     wordHolder = wordToGuess.join(" ");
            //     console.log(wordToGuess);
            //     messageBoxText.innerHTML = messages.correct;
            // };

            if (lettersGuessed.indexOf(userGuess) === -1) {
                lettersGuessed.push(userGuess);
                guessesRemaining -= 1;
                console.log("you have " + guessesRemaining + " guesses remaining");
                messageBoxText.innerHTML = messages.incorrect;
            } else {
                messageBoxText.innerHTML = messages.guessed;
            };

            if (guessesRemaining < 1) {
                messageBoxText.innerHTML = messages.lose;
                console.log(messages.lose);
            };


            //Updates guesses left and letters you guess
            livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";
            lettersGuessedText.innerHTML = "Letters Guessed: " + lettersGuessed;

        };

        //This button resets the guesses remaining and chooses a new word
        function resetButton() {
            guessesRemaining = 10;
            chosenWord = categories[Math.floor(Math.random() * categories.length)];
            console.log(chosenWord + " is the chosen word");

            for (var i = 0; i < chosenWord.length; i++) {
                wordToGuess.push("_");
                document.getElementById("word-to-guess-text").innerHTML = wordToGuess.join(" ");
            }

            wordToGuess = [];
            lettersGuessed = [];

            lettersGuessedText.innerHTML = "Letters Guessed: " + lettersGuessed;
            livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";
        };




    </script>
</body>

</html>