<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Liam's Hangman Game</title>
</head>

<body>
    <div id="wrapper">
        <h1>Welcome to my Fruit-Themed Hangman Game!</h1>
        <p id="word-to-guess-text">Push any key to begin.</p>
        <p id="guessed-letters-text">Letters Guessed: </p>
        <p id="message-text">Choose a letter to begin!</p>
        <p id="lives-left"></p>
        <p id="wins-text">Wins: 0</p>
        <p>Losses:<b id="losses-text">0</b></p>
        <button id="reset-button" onclick="resetButton();">Play Again?</button>
    </div>

    <script>
        var guessesRemaining = 10;
        //How many wins the player has
        var wins = 0;
        var winsText = document.getElementById("wins-text").innerHTML;

        //How many losses the player has
        var losses = 0;
        var lossesText = document.getElementById("losses-text").innerHTML = losses;

        // Letters chosen should be pushed to this array and emptied when you win or lose
        var lettersGuessed = [];
        var wordToGuess = [];

        //This contains possible words to guess
        var categories = ["apple", "watermelon", "pear", "persimmon", "pineapple", "rambutan", "jackfruit", "durian", "peach", "banana", "apricot", "orange", "tangerine", "coconut", "kumquat", "honeydew", "blueberry", "mango", "soursop", "lemon", "rasberry", "strawberry", "blackberry", "cranberry", "peach", "nectarine", "cherry", "date", "lychee", "grape", "guava", "kiwi", "lime", "passionfruit", "pomegranate"]

        //This variable is random word from the categories array
        var chosenWord = categories[Math.floor(Math.random() * categories.length)];
        console.log(chosenWord + " is the chosen word");

        var messageBoxText = document.getElementById("message-text");

        //This objects contains all the messages that can occur during this game
        var messages = {
            win: "You win this round!",
            lose: "You didn't guess the word! Play Again?",
            correct: "That letter was correct! Pick another one.",
            incorrect: "That was incorrect, try another letter",
            guessed: "You already guessed that letter, try a different letter",
        };

        var wordHolder = document.getElementById("word-to-guess-text").innerHTML;
        var lettersGuessedText = document.getElementById("guessed-letters-text");
        var livesLeftText = document.getElementById("lives-left");
        livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";
        console.log(livesLeftText.innerHTML);


        livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";

        //This create the spaces for the letter you need to guess at the length of the chosenWord
        for (let i = 0; i < chosenWord.length; i++) {
            wordToGuess.push("_");
            document.getElementById("word-to-guess-text").innerHTML = wordToGuess.join(" ");
        };

        //This function checks if you pushed a-z and converts it to lowercase 
        document.onkeyup = function (event) {
            if (event.keyCode >= 65 && event.keyCode <= 90) {
                userGuess(event.key.toLowerCase());
            }
        };

        // This function takes whatever letter you pushed and checks if matches any of the the selected word letters
        function userGuess(letter) {
            if (lettersGuessed.indexOf(letter) === -1) {
                lettersGuessed.push(letter);
                checkGuess(letter);
                console.log("you have " + guessesRemaining + " guesses remaining");
                messageBoxText.innerHTML = messages.incorrect;
            } else {
                messageBoxText.innerHTML = messages.guessed;
            };

            updateDisplay();
            checkForWin();
        };

        //This checks to see if the letter I chose is correct
        function checkGuess(letter) {
            var letterPostions = [];  //Stores letter Positions
            for (var g = 0; g < chosenWord.length; g++) {
                if (chosenWord[g] === letter) {
                    wordToGuess[g] = letter;
                    wordToGuess.join(" ");
                }
            };

            if (letterPostions.length <= 0) {
                guessesRemaining -= 1;
            } else {
                for (var g = 0; g < letterPostions.length; g++) {
                    wordToGuess[chosenWord[g]] = letter;
                }
            }
            updateDisplay();
        };

        function updateDisplay() {
            // for (let i = 0; i < wordToGuess.length; i++) {
            document.getElementById("word-to-guess-text").innerText = wordToGuess.join(" ");
            // }
            wordHolder = wordToGuess.join(" ");
            livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";
            lettersGuessedText.innerHTML = "Letters Guessed: " + lettersGuessed;
            winsText = "Wins: " + wins;
            if (guessesRemaining <= 0) {
                messageBoxText.innerHTML = messages.lose;
            }
        };

        function checkForWin() {
            if (wordToGuess.indexOf("_") === -1) {
                winsText = "Wins: " + (wins++);
                messageBoxText.innerHTML = messages.win;
            } else if (guessesRemaining < 1) {
                messageBoxText.innerHTML = messages.lose;
                console.log(messages.lose);
            };
        };


        //This button resets the guesses remaining and chooses a new word and updates the displays
        function resetButton() {
            guessesRemaining = 10;
            chosenWord = categories[Math.floor(Math.random() * categories.length)];
            console.log(chosenWord + " is the chosen word");

            wordToGuess = [];
            lettersGuessed = [];

            for (var i = 0; i < chosenWord.length; i++) {
                wordToGuess.push("_");
                document.getElementById("word-to-guess-text").innerHTML = wordToGuess.join(" ");
            }

            lettersGuessedText.innerHTML = "Letters Guessed: " + lettersGuessed;
            livesLeftText.innerHTML = "You have " + guessesRemaining + " lives remaining";

            updateDisplay();
        };




    </script>
</body>

</html>